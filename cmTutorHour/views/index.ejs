<%- include('partials/header') %>
<main class="main">
    <!-- Hero Section -->
    <section class="hero">
        <h1 class="hero-title">Discover Personalized Learning</h1>
        <p class="hero-subtitle">Connect with top tutors tailored to your needs.</p>
        <div class="hero-buttons">
            <a href="/auth/register/student" class="btn btn-primary">Start Learning</a>
            <a href="/auth/register/tutor" class="btn btn-secondary">Become a Tutor</a>
        </div>
    </section>

    <!-- Search and Filters -->
    <section class="search-section">
        <form action="/" method="GET" class="search-form">
            <div class="search-input">
                <input type="text" name="subject" placeholder="Search by subject (e.g., Math)" value="<%= query.subject || '' %>">
                <button type="submit" class="btn btn-primary">Search</button>
            </div>
            <div class="search-filters">
                <select name="maxRate" class="filter-select">
                    <option value="">Max Rate ($/hr)</option>
                    <option value="20" <%= query.maxRate === '20' ? 'selected' : '' %>>$20</option>
                    <option value="50" <%= query.maxRate === '50' ? 'selected' : '' %>>$50</option>
                    <option value="100" <%= query.maxRate === '100' ? 'selected' : '' %>>$100</option>
                </select>
            </div>
        </form>
    </section>

    <!-- Tutors Section -->
    <section class="tutors">
        <h2 class="tutors-title">Explore Our Tutors</h2>
        <% if (tutors.length > 0) { %>
            <div class="tutor-grid">
                <% tutors.forEach(tutor => { %>
                    <div class="tutor-card">
                        <div class="tutor-avatar">
                            <% if (tutor.profilePicture) { %>
                                <img src="<%= tutor.profilePicture %>" alt="Profile Picture">
                            <% } else { %>
                                <span><%= tutor.name.charAt(0) %></span>
                            <% } %>
                        </div>
                        <div class="tutor-info">
                            <h3 class="tutor-name"><%= tutor.name %></h3>
                            <p class="tutor-subjects"><%= tutor.teachingSubjects.join(', ') %></p>
                            <p class="tutor-rate">$<%= tutor.hourlyRate %>/hr</p>
                            <a href="/student/tutor/<%= tutor._id %>" class="tutor-link">View Profile</a>
                        </div>
                    </div>
                <% }) %>
            </div>
        <% } else { %>
            <p class="tutors-empty">No tutors found. Try adjusting your filters!</p>
        <% } %>
    </section>
</main>
<%- include('partials/footer') %>