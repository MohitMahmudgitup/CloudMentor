<%- include('../partials/header') %>
<h2 class="text-neon">Admin Dashboard</h2>
<div class="row">
    <div class="col-md-4">
        <h3 class="text-light">Users</h3>
        <ul class="list-group">
            <% users.forEach(u => { %>
                <li class="list-group-item futuristic-item">
                    <%= u.name %> - <%= u.role %> - <%= u.email %>
                    <form action="/admin/block-user/<%= u._id %>" method="POST" class="d-inline">
                        <button type="submit" class="btn btn-sm btn-danger"><%= u.isBlocked ? 'Unblock' : 'Block' %></button>
                    </form>
                    <form action="/admin/reset-password/<%= u._id %>" method="POST" class="d-inline">
                        <button type="submit" class="btn btn-sm btn-warning">Reset Password</button>
                    </form>
                </li>
            <% }) %>
        </ul>
    </div>
    <div class="col-md-4">
        <h3 class="text-light">Sessions</h3>
        <ul class="list-group">
            <% sessions.forEach(session => { %>
                <li class="list-group-item futuristic-item">
                    <%= session.student.name %> with <%= session.tutor.name %> | <%= session.date.toLocaleString() %>
                </li>
            <% }) %>
        </ul>
    </div>
    <div class="col-md-4">
        <h3 class="text-light">Transactions</h3>
        <ul class="list-group">
            <% transactions.forEach(tx => { %>
                <li class="list-group-item futuristic-item">
                    <%= tx.user.name %>: <%= tx.type %> $<%= tx.amount %> - <%= tx.status %>
                </li>
            <% }) %>
        </ul>
    </div>
</div>
<%- include('../partials/footer') %>